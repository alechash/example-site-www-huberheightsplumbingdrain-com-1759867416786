(()=>{const d=document,w=window,de=d.documentElement,qs=(s,c=d)=>c.querySelector(s),qsa=(s,c=d)=>Array.from(c.querySelectorAll(s));de.classList.add('js');const THEME_KEY='theme';function applyTheme(t){t==='dark'?de.classList.add('dark'):de.classList.remove('dark')}function getPref(){let t=localStorage.getItem(THEME_KEY);if(!t)t=w.matchMedia&&w.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light';return t}let theme=getPref();applyTheme(theme);qsa('[data-dark-toggle],#darkToggle').forEach(b=>{const u=()=>b.setAttribute('aria-pressed',theme==='dark');u();b.addEventListener('click',()=>{theme=theme==='dark'?'light':'dark';localStorage.setItem(THEME_KEY,theme);applyTheme(theme);u()})});const header=qs('[data-header],.site-header,header.sticky');if(header){const f=()=>{const y=w.scrollY||de.scrollTop;header.classList.toggle('scrolled',y>10);header.classList.toggle('shrink',y>80)};w.addEventListener('scroll',f,{passive:true});f()}const btt=qs('[data-backtotop],#backToTop');if(btt){const g=()=>btt.classList.toggle('show',(w.scrollY||de.scrollTop)>400);btt.addEventListener('click',e=>{e.preventDefault();w.scrollTo({top:0,behavior:'smooth'})});w.addEventListener('scroll',g,{passive:true});g()}qsa('[data-accordion]').forEach(acc=>{acc.addEventListener('click',e=>{const btn=e.target.closest('[data-accordion-button]');if(!btn||!acc.contains(btn))return;const id=btn.getAttribute('aria-controls')||btn.dataset.target;const panel=id?qs('#'+id.replace('#','')):btn.nextElementSibling;const expanded=btn.getAttribute('aria-expanded')==='true';const single=acc.hasAttribute('data-accordion-single');if(single){qsa('[data-accordion-button][aria-expanded="true"]',acc).forEach(b=>{if(b!==btn){const pid=b.getAttribute('aria-controls')||b.dataset.target;const pn=pid?qs('#'+pid.replace('#','')):b.nextElementSibling;b.setAttribute('aria-expanded','false');if(pn)pn.hidden=true}})}btn.setAttribute('aria-expanded',(!expanded).toString());if(panel)panel.hidden=expanded});qsa('[data-accordion-panel]',acc).forEach(p=>{const btn=acc.querySelector('[aria-controls="'+p.id+'"],[data-target="'+p.id+'"]');if(btn)btn.setAttribute('aria-expanded',p.hasAttribute('hidden')?'false':'true')})});qsa('[data-carousel]').forEach(car=>{const items=qsa('[data-carousel-item]',car);if(items.length<2)return;let idx=0,timer=null,delay=+car.dataset.delay||5000;const dots=qs('[data-carousel-dots]',car);function renderDots(){if(!dots)return;dots.innerHTML='';items.forEach((_,i)=>{const b=d.createElement('button');b.type='button';b.className='carousel-dot';b.setAttribute('aria-label','Go to slide '+(i+1));b.addEventListener('click',()=>go(i));dots.appendChild(b)})}function update(){items.forEach((el,i)=>{const a=i===idx;el.classList.toggle('is-active',a);el.setAttribute('aria-hidden',(!a).toString());el.tabIndex=a?0:-1});if(dots)qsa('.carousel-dot',dots).forEach((b,i)=>b.classList.toggle('is-active',i===idx))}function next(){idx=(idx+1)%items.length;update()}function prev(){idx=(idx-1+items.length)%items.length;update()}function go(i){idx=(i+items.length)%items.length;update()}function start(){stop();timer=setInterval(next,delay)}function stop(){if(timer){clearInterval(timer);timer=null}}renderDots();update();start();car.addEventListener('mouseenter',stop);car.addEventListener('mouseleave',start);car.addEventListener('focusin',stop);car.addEventListener('focusout',start);const n=qs('[data-carousel-next]',car),p=qs('[data-carousel-prev]',car);if(n)n.addEventListener('click',e=>{e.preventDefault();next()});if(p)p.addEventListener('click',e=>{e.preventDefault();prev()})});qsa('[data-tabs]').forEach(tabs=>{const list=qs('[role="tablist"]',tabs)||tabs,tabsBtns=qsa('[role="tab"],[data-tab-target]',list);function act(btn){tabsBtns.forEach(b=>{const t=b.getAttribute('data-tab-target')||b.getAttribute('aria-controls');const panel=t?(qs(t,tabs)||qs('#'+t.replace('#',''),tabs)):null;const a=b===btn;b.setAttribute('aria-selected',a?'true':'false');b.classList.toggle('is-active',a);if(panel){panel.hidden=!a;panel.setAttribute('aria-hidden',(!a).toString())}})}tabsBtns.forEach((b,i)=>{if(!b.hasAttribute('role'))b.setAttribute('role','tab');if(!b.id)b.id='tab-'+Math.random().toString(36).slice(2,7);const t=b.getAttribute('data-tab-target')||b.getAttribute('aria-controls');if(t){const p=qs(t,tabs)||qs('#'+t.replace('#',''),tabs);if(p){p.setAttribute('role','tabpanel');p.setAttribute('aria-labelledby',b.id);if(i)p.hidden=true}}b.addEventListener('click',e=>{e.preventDefault();act(b)});b.addEventListener('keydown',e=>{const i=tabsBtns.indexOf(b);if(e.key==='ArrowRight'){e.preventDefault();const n=tabsBtns[(i+1)%tabsBtns.length];n.focus();act(n)}if(e.key==='ArrowLeft'){e.preventDefault();const p=tabsBtns[(i-1+tabsBtns.length)%tabsBtns.length];p.focus();act(p)}})})});qsa('[data-filter-group]').forEach(group=>{const controls=qsa('[data-filter]',group),targetSel=group.dataset.target||'[data-filter-items]',container=qs(targetSel,group.parentElement||d)||qs(targetSel),items=container?qsa('[data-filter-item]',container):[];function apply(v){items.forEach(it=>{const cats=(it.dataset.cat||'').split(/\s*,\s*|\s+/).filter(Boolean),show=v==='all'||!v||cats.includes(v);it.style.display=show?'':'none';it.setAttribute('aria-hidden',show?'false':'true')});controls.forEach(c=>c.classList.toggle('is-active',c.dataset.filter===v))}controls.forEach(c=>c.addEventListener('click',e=>{e.preventDefault();apply(c.dataset.filter||'all')}));const initial=(qs('[data-filter].is-active',group)||controls[0]||{}).dataset?.filter||'all';apply(initial)});qsa('a[data-smooth][href^="#"]').forEach(a=>a.addEventListener('click',e=>{const id=a.getAttribute('href').slice(1),el=id&&d.getElementById(id);if(el){e.preventDefault();el.scrollIntoView({behavior:'smooth',block:'start'})}}));if(w.AOS)w.AOS.init({once:true});})();